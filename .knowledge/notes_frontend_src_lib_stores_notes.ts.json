{"is_source_file": true, "format": "TypeScript", "description": "This file manages the notes state for a frontend application using Svelte's store system. It provides functions to load, select, update, save, and delete notes, interfacing with an API service. It also defines state interfaces and derived store for selected note.", "external_files": ["$lib/services/api/client", "$lib/services/api/notes"], "external_methods": ["listNotes", "createNote", "updateNote", "deleteNote"], "published": ["notes", "selectedNote", "loadNotes", "setSearch", "selectNote", "updateDraft", "startNewNote", "saveCurrentNote", "deleteCurrentNote"], "classes": [], "methods": [{"name": "export async function loadNotes(): Promise<void> { loadNotes", "description": "Loads notes from the backend based on the current search query, updates the notes store, and sets the selected note.", "scope": "", "scopeKind": ""}, {"name": "export function setSearch(text: string): void { setSearch", "description": "Sets the search string and triggers reloading of notes.", "scope": "", "scopeKind": ""}, {"name": "export function selectNote(id: string): void { selectNote", "description": "Selects a note by its ID, initializes draft with its content.", "scope": "", "scopeKind": ""}, {"name": "export function updateDraft(field: 'title' | 'content', value: string): void { updateDraft", "description": "Updates either the title or content of the current draft.", "scope": "", "scopeKind": ""}, {"name": "export function startNewNote(): void { startNewNote", "description": "Begins drafting a new, unsaved note.", "scope": "", "scopeKind": ""}, {"name": "export async function saveCurrentNote(): Promise<void> { saveCurrentNote", "description": "Creates a new note or updates the existing one based on the draft.", "scope": "", "scopeKind": ""}, {"name": "export async function deleteCurrentNote(): Promise<void> { deleteCurrentNote", "description": "Deletes the currently selected note.", "scope": "", "scopeKind": ""}], "calls": ["apiListNotes", "apiCreate", "apiUpdate", "apiDelete"], "search-terms": ["Svelte store notes management", "notes frontend state handling", "TypeScript notes store", "API integration for notes", "notes CRUD functions"], "state": 2, "file_id": 19, "knowledge_revision": 47, "git_revision": "", "revision_history": [{"39": ""}, {"47": ""}], "ctags": [{"_type": "tag", "name": "Error", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-159557-159586/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^    const msg = e instanceof Error ? e.message : 'Failed to delete note';$/", "language": "TypeScript", "kind": "constant", "scope": "deleteCurrentNote", "scopeKind": "function"}, {"_type": "tag", "name": "Error", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-159557-159586/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^    const msg = e instanceof Error ? e.message : 'Failed to load notes';$/", "language": "TypeScript", "kind": "constant", "scope": "loadNotes", "scopeKind": "function"}, {"_type": "tag", "name": "Error", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-159557-159586/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^    const msg = e instanceof Error ? e.message : 'Failed to save note';$/", "language": "TypeScript", "kind": "constant", "scope": "saveCurrentNote", "scopeKind": "function"}, {"_type": "tag", "name": "NotesState", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-159557-159586/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^export interface NotesState {$/", "language": "TypeScript", "kind": "interface"}, {"_type": "tag", "name": "created", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-159557-159586/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^      const created = await apiCreate(draft.title, draft.content);$/", "language": "TypeScript", "kind": "constant", "scope": "saveCurrentNote", "scopeKind": "function"}, {"_type": "tag", "name": "deleteCurrentNote", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-159557-159586/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^export async function deleteCurrentNote(): Promise<void> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "draft", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-159557-159586/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^  const draft = state.draft || { title: '', content: '' };$/", "language": "TypeScript", "kind": "constant", "scope": "saveCurrentNote", "scopeKind": "function"}, {"_type": "tag", "name": "draft", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-159557-159586/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^  draft: null,$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "draft", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-159557-159586/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^  draft: { title: string; content: string } | null;$/", "language": "TypeScript", "kind": "property", "scope": "NotesState", "scopeKind": "interface"}, {"_type": "tag", "name": "e", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-159557-159586/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^    const msg = e instanceof Error ? e.message : 'Failed to delete note';$/", "language": "TypeScript", "kind": "constant", "scope": "deleteCurrentNote", "scopeKind": "function"}, {"_type": "tag", "name": "e", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-159557-159586/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^    const msg = e instanceof Error ? e.message : 'Failed to load notes';$/", "language": "TypeScript", "kind": "constant", "scope": "loadNotes", "scopeKind": "function"}, {"_type": "tag", "name": "e", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-159557-159586/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^    const msg = e instanceof Error ? e.message : 'Failed to save note';$/", "language": "TypeScript", "kind": "constant", "scope": "saveCurrentNote", "scopeKind": "function"}, {"_type": "tag", "name": "error", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-159557-159586/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^  error: null$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "error", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-159557-159586/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^  error: string | null;$/", "language": "TypeScript", "kind": "property", "scope": "NotesState", "scopeKind": "interface"}, {"_type": "tag", "name": "idx", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-159557-159586/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^        const idx = s.notes.findIndex((n) => n.id === state.selectedId);$/", "language": "TypeScript", "kind": "constant", "scope": "saveCurrentNote", "scopeKind": "function"}, {"_type": "tag", "name": "initialState", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-159557-159586/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^const initialState: NotesState = {$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "instanceof", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-159557-159586/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^    const msg = e instanceof Error ? e.message : 'Failed to delete note';$/", "language": "TypeScript", "kind": "constant", "scope": "deleteCurrentNote", "scopeKind": "function"}, {"_type": "tag", "name": "instanceof", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-159557-159586/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^    const msg = e instanceof Error ? e.message : 'Failed to load notes';$/", "language": "TypeScript", "kind": "constant", "scope": "loadNotes", "scopeKind": "function"}, {"_type": "tag", "name": "instanceof", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-159557-159586/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^    const msg = e instanceof Error ? e.message : 'Failed to save note';$/", "language": "TypeScript", "kind": "constant", "scope": "saveCurrentNote", "scopeKind": "function"}, {"_type": "tag", "name": "list", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-159557-159586/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^    const list = await apiListNotes({ search: state.search.trim() || undefined });$/", "language": "TypeScript", "kind": "constant", "scope": "loadNotes", "scopeKind": "function"}, {"_type": "tag", "name": "loadNotes", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-159557-159586/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^export async function loadNotes(): Promise<void> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "loading", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-159557-159586/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^      const newState = { ...s, notes: list, loading: false };$/", "language": "TypeScript", "kind": "constant", "scope": "loadNotes", "scopeKind": "function"}, {"_type": "tag", "name": "loading", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-159557-159586/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^  loading: boolean;$/", "language": "TypeScript", "kind": "property", "scope": "NotesState", "scopeKind": "interface"}, {"_type": "tag", "name": "msg", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-159557-159586/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^    const msg = e instanceof Error ? e.message : 'Failed to delete note';$/", "language": "TypeScript", "kind": "constant", "scope": "deleteCurrentNote", "scopeKind": "function"}, {"_type": "tag", "name": "msg", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-159557-159586/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^    const msg = e instanceof Error ? e.message : 'Failed to load notes';$/", "language": "TypeScript", "kind": "constant", "scope": "loadNotes", "scopeKind": "function"}, {"_type": "tag", "name": "msg", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-159557-159586/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^    const msg = e instanceof Error ? e.message : 'Failed to save note';$/", "language": "TypeScript", "kind": "constant", "scope": "saveCurrentNote", "scopeKind": "function"}, {"_type": "tag", "name": "newNotes", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-159557-159586/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^        const newNotes = [...s.notes];$/", "language": "TypeScript", "kind": "constant", "scope": "saveCurrentNote", "scopeKind": "function"}, {"_type": "tag", "name": "newState", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-159557-159586/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^      const newState = { ...s, notes: list, loading: false };$/", "language": "TypeScript", "kind": "constant", "scope": "loadNotes", "scopeKind": "function"}, {"_type": "tag", "name": "nextSelected", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-159557-159586/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^      const nextSelected = remaining[0]?.id || null;$/", "language": "TypeScript", "kind": "constant", "scope": "deleteCurrentNote", "scopeKind": "function"}, {"_type": "tag", "name": "note", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-159557-159586/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^    const note = s.notes.find((n) => n.id === id) || null;$/", "language": "TypeScript", "kind": "constant", "scope": "selectNote", "scopeKind": "function"}, {"_type": "tag", "name": "notes", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-159557-159586/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^      const newState = { ...s, notes: list, loading: false };$/", "language": "TypeScript", "kind": "constant", "scope": "loadNotes", "scopeKind": "function"}, {"_type": "tag", "name": "notes", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-159557-159586/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^  notes: Note[];$/", "language": "TypeScript", "kind": "property", "scope": "NotesState", "scopeKind": "interface"}, {"_type": "tag", "name": "notes", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-159557-159586/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^export const notes = writable<NotesState>({ ...initialState });$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "remaining", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-159557-159586/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^      const remaining = s.notes.filter((n) => n.id !== state.selectedId);$/", "language": "TypeScript", "kind": "constant", "scope": "deleteCurrentNote", "scopeKind": "function"}, {"_type": "tag", "name": "saveCurrentNote", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-159557-159586/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^export async function saveCurrentNote(): Promise<void> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "saving", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-159557-159586/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^  saving: boolean;$/", "language": "TypeScript", "kind": "property", "scope": "NotesState", "scopeKind": "interface"}, {"_type": "tag", "name": "saving", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-159557-159586/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^  saving: false,$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "search", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-159557-159586/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^  search: '',$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "search", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-159557-159586/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^  search: string;$/", "language": "TypeScript", "kind": "property", "scope": "NotesState", "scopeKind": "interface"}, {"_type": "tag", "name": "selectNote", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-159557-159586/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^export function selectNote(id: string): void {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "selectedId", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-159557-159586/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^  selectedId: string | null;$/", "language": "TypeScript", "kind": "property", "scope": "NotesState", "scopeKind": "interface"}, {"_type": "tag", "name": "selectedNote", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-159557-159586/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^export const selectedNote = derived([notes], ([$notes]) => {$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "setSearch", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-159557-159586/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^export function setSearch(text: string): void {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "startNewNote", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-159557-159586/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^export function startNewNote(): void {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "state", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-159557-159586/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^    const state = get(notes);$/", "language": "TypeScript", "kind": "constant", "scope": "loadNotes", "scopeKind": "function"}, {"_type": "tag", "name": "state", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-159557-159586/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^  const state = get(notes);$/", "language": "TypeScript", "kind": "constant", "scope": "deleteCurrentNote", "scopeKind": "function"}, {"_type": "tag", "name": "state", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-159557-159586/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^  const state = get(notes);$/", "language": "TypeScript", "kind": "constant", "scope": "saveCurrentNote", "scopeKind": "function"}, {"_type": "tag", "name": "updateDraft", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-159557-159586/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^export function updateDraft(field: 'title' | 'content', value: string): void {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "updated", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-159557-159586/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^      const updated = await apiUpdate(state.selectedId, draft.title, draft.content);$/", "language": "TypeScript", "kind": "constant", "scope": "saveCurrentNote", "scopeKind": "function"}], "hash": "f0ebabe91cb75049183110cf7a7b4803", "format-version": 4, "code-base-name": "notes_frontend", "filename": "notes_frontend/src/lib/stores/notes.ts", "fields": [{"name": "export interface NotesState {", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "draft: { title: string; content: string } | null;", "scope": "NotesState", "scopeKind": "interface", "description": "unavailable"}, {"name": "error: string | null;", "scope": "NotesState", "scopeKind": "interface", "description": "unavailable"}, {"name": "loading: boolean;", "scope": "NotesState", "scopeKind": "interface", "description": "unavailable"}, {"name": "notes: Note[];", "scope": "NotesState", "scopeKind": "interface", "description": "unavailable"}, {"name": "saving: boolean;", "scope": "NotesState", "scopeKind": "interface", "description": "unavailable"}, {"name": "search: string;", "scope": "NotesState", "scopeKind": "interface", "description": "unavailable"}, {"name": "selectedId: string | null;", "scope": "NotesState", "scopeKind": "interface", "description": "unavailable"}]}