{"is_source_file": true, "format": "TypeScript", "description": "This file defines a Svelte store and API interactions for user authentication, including login, registration, logout, and persistence of auth state in local storage.", "external_files": ["$lib/services/api/auth", "$lib/services/api/client"], "external_methods": ["login as apiLogin", "register as apiRegister", "logout as apiLogout", "setAuthToken"], "published": ["auth", "login", "register", "logout", "isAuthenticated"], "classes": [], "methods": [{"name": "function loadInitial(): AuthState { loadInitial", "description": "Loads the initial auth state from local storage if available.", "scope": "", "scopeKind": ""}, {"name": "function persist(state: AuthState) { persist", "description": "Persists the current auth state into local storage.", "scope": "", "scopeKind": ""}, {"name": "export async function login(email: string, password: string): Promise<void> { login", "description": "Logs in a user with email and password, updates storage and auth token.", "scope": "", "scopeKind": ""}, {"name": "export async function register(email: string, password: string): Promise<void> { register", "description": "Registers a user with email and password, updates storage and auth token.", "scope": "", "scopeKind": ""}, {"name": "export async function logout(): Promise<void> { logout", "description": "Logs out the user, clears auth state and token.", "scope": "", "scopeKind": ""}, {"name": "export function isAuthenticated(): boolean { isAuthenticated", "description": "Checks if the current auth state indicates an authenticated user.", "scope": "", "scopeKind": ""}], "calls": ["apiLogin", "apiRegister", "apiLogout", "setAuthToken", "get"], "search-terms": ["auth store", "localStorage auth", "svelte auth", "auth state management", "auth API integration"], "state": 2, "file_id": 18, "knowledge_revision": 37, "git_revision": "", "ctags": [{"_type": "tag", "name": "AuthState", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-159557-159586/notes_frontend/src/lib/stores/auth.ts", "pattern": "/^export interface AuthState {$/", "language": "TypeScript", "kind": "interface"}, {"_type": "tag", "name": "LS_KEY", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-159557-159586/notes_frontend/src/lib/stores/auth.ts", "pattern": "/^const LS_KEY = 'auth_state';$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "auth", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-159557-159586/notes_frontend/src/lib/stores/auth.ts", "pattern": "/^export const auth = writable<AuthState>(typeof window !== 'undefined' ? loadInitial() : { user: /", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "isAuthenticated", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-159557-159586/notes_frontend/src/lib/stores/auth.ts", "pattern": "/^export function isAuthenticated(): boolean {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "loadInitial", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-159557-159586/notes_frontend/src/lib/stores/auth.ts", "pattern": "/^function loadInitial(): AuthState {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "login", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-159557-159586/notes_frontend/src/lib/stores/auth.ts", "pattern": "/^export async function login(email: string, password: string): Promise<void> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "logout", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-159557-159586/notes_frontend/src/lib/stores/auth.ts", "pattern": "/^export async function logout(): Promise<void> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "persist", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-159557-159586/notes_frontend/src/lib/stores/auth.ts", "pattern": "/^function persist(state: AuthState) {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "raw", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-159557-159586/notes_frontend/src/lib/stores/auth.ts", "pattern": "/^    const raw = localStorage.getItem(LS_KEY);$/", "language": "TypeScript", "kind": "constant", "scope": "loadInitial", "scopeKind": "function"}, {"_type": "tag", "name": "register", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-159557-159586/notes_frontend/src/lib/stores/auth.ts", "pattern": "/^export async function register(email: string, password: string): Promise<void> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-159557-159586/notes_frontend/src/lib/stores/auth.ts", "pattern": "/^  const res = await apiLogin(email, password);$/", "language": "TypeScript", "kind": "constant", "scope": "login", "scopeKind": "function"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-159557-159586/notes_frontend/src/lib/stores/auth.ts", "pattern": "/^  const res = await apiRegister(email, password);$/", "language": "TypeScript", "kind": "constant", "scope": "register", "scopeKind": "function"}, {"_type": "tag", "name": "state", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-159557-159586/notes_frontend/src/lib/stores/auth.ts", "pattern": "/^      const state = JSON.parse(raw) as AuthState;$/", "language": "TypeScript", "kind": "constant", "scope": "loadInitial", "scopeKind": "function"}, {"_type": "tag", "name": "state", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-159557-159586/notes_frontend/src/lib/stores/auth.ts", "pattern": "/^  const state = get(auth);$/", "language": "TypeScript", "kind": "constant", "scope": "isAuthenticated", "scopeKind": "function"}, {"_type": "tag", "name": "token", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-159557-159586/notes_frontend/src/lib/stores/auth.ts", "pattern": "/^  token: string | null;$/", "language": "TypeScript", "kind": "property", "scope": "AuthState", "scopeKind": "interface"}, {"_type": "tag", "name": "user", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-159557-159586/notes_frontend/src/lib/stores/auth.ts", "pattern": "/^  user: User | null;$/", "language": "TypeScript", "kind": "property", "scope": "AuthState", "scopeKind": "interface"}], "hash": "069f6ff1d2c5197e98f57f18c39ad69d", "format-version": 4, "code-base-name": "notes_frontend", "filename": "notes_frontend/src/lib/stores/auth.ts", "fields": [{"name": "export interface AuthState {", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "token: string | null;", "scope": "AuthState", "scopeKind": "interface", "description": "unavailable"}, {"name": "user: User | null;", "scope": "AuthState", "scopeKind": "interface", "description": "unavailable"}], "revision_history": [{"37": ""}]}